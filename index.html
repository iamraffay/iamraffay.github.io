<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Form</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <div class="container">
    <h1>Contact Us</h1>

    <form name="contactForm" action="second.html" method="post" onsubmit="return validateForm()" novalidate>
      <div class="field">
        <label for="name">Full Name</label>
        <input id="name" name="name" type="text" placeholder="Your full name" required>
      </div>

      <div class="field">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required>
      </div>

      <div class="field">
        <label for="subject">Subject</label>
        <input id="subject" name="subject" type="text" placeholder="Letters only" required>
      </div>

      <div class="field">
        <label for="address">Address</label>
        <input id="address" name="address" type="text" placeholder="Street address" required>
      </div>

      <div class="row">
        <div class="field small">
          <label for="state">State</label>
          <select id="state" name="state" required>
            <option value="">Select state</option>
            <option value="NSW">NSW</option>
            <option value="VIC">VIC</option>
            <option value="QLD">QLD</option>
            <option value="ACT">ACT</option>
            <option value="SA">SA</option>
          </select>
        </div>

        <div class="field small">
          <label for="postcode">Postcode</label>
          <input id="postcode" name="postcode" type="text" placeholder="e.g. 2000" pattern="\d{4}" title="4 digit postcode" required>
        </div>
      </div>

      <div class="field">
        <label for="message">Message</label>
        <textarea id="message" name="message" rows="6" placeholder="Write your message" required></textarea>
      </div>

      <div class="actions">
        <button type="submit">Submit</button>
      </div>
    </form>
  </div>

  <script>
    function validateForm() {
      const f = document.forms['contactForm'];
      const name = f['name'].value.trim();
      const email = f['email'].value.trim().toLowerCase();
      const subject = f['subject'].value.trim();
      const message = f['message'].value.trim();

      // Name minimum 5 characters
      if (name.length < 5) {
        alert('Name must be at least 5 characters.');
        f['name'].focus();
        return false;
      }

      // Email must be Gmail, Yahoo, or Outlook
      const allowed = ['@gmail.com', '@yahoo.com', '@outlook.com'];
      if (!allowed.some(ext => email.endsWith(ext))) {
        alert('Email must be Gmail, Yahoo, or Outlook.');
        f['email'].focus();
        return false;
      }

      // Message cannot contain <script
      if (message.toLowerCase().includes('<script')) {
        alert('Message cannot contain "<script".');
        f['message'].focus();
        return false;
      }

      // Subject only letters and spaces
      const alpha = /^[A-Za-z\s]+$/;
      if (!alpha.test(subject) || subject.length === 0) {
        alert('Subject may only contain letters and spaces.');
        f['subject'].focus();
        return false;
      }

      return true; // All validations passed
    }
  </script>
</body>
</html>
